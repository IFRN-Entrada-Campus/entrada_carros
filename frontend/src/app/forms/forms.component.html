<app-menu></app-menu>
<br>
<br>
<div *ngIf="!admin">
    <h1>Você não tem permissão para acessar esta página.</h1>
</div>
<div *ngIf="admin">
    <h1>Cadastro de dados</h1>
    <p *ngIf="formInvalid" class="error-message">O formulário contém erros. Preencha todos os campos e verifique se: O ano do carro está entre 1900 e o ano atual. A placa está digitada no padrão(LLL1111 ou LLL11L1).</p>
    <p *ngIf="erroSQL" class="error-message">Não foi possível cadastrar. Verifique se não há dados incorretos e tente novamente.</p>
    <p *ngIf="cadastroSucesso" class="success-message">Dados cadastrados com sucesso!</p>
    <p class="error-message">{{ erroUsuario }}</p>
    <br>
    <table class="forms">
        <tr>
            <td><label htmlFor="cadastro">Condutor já cadastrado?</label></td>
            <td><p-checkbox [(ngModel)]="usuarioJaCadastrado" [binary]="true" inputId="cadastro"> </p-checkbox> </td>
        </tr>
        <tr>
            <td><label htmlFor="marca">Marca do carro: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="marca" [(ngModel)]="dado.marcaCarro" required></td>
        </tr>
        <tr>
            <td><label htmlFor="modelo">Modelo do carro: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="modelo" [(ngModel)]="dado.modeloCarro" required></td>
        </tr>
        <tr>
            <td><label htmlFor="placa">Placa do carro: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="placa" [(ngModel)]="dado.placaCarro" required></td>
        </tr>
        <tr>
            <td><label htmlFor="ano">Ano do carro: </label></td>
            <td><p-inputNumber class="p-inputtext-sm" id="ano" [(ngModel)]="dado.anoCarro"
                    [useGrouping]="false"></p-inputNumber></td>
        </tr>
        <tr *ngIf="!usuarioJaCadastrado">
            <td><label htmlFor="nome">Nome completo do condutor: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="nome" [(ngModel)]="dado.nomePessoa" required></td>
        </tr>
        <tr *ngIf="!usuarioJaCadastrado">
            <td><label htmlFor="tipoId">tipoId: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="tipoId" [(ngModel)]="dado.tipoId" required></td>
        </tr>
        <tr *ngIf="!usuarioJaCadastrado">
            <td><label htmlFor="vinculo">vinculo: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="vinculo" [(ngModel)]="dado.vinculo" required></td>
        </tr>

        <tr>
            <td><label htmlFor="idPessoa"> Identificação </label></td>
            <td><p-inputNumber class="p-inputtext-sm" id="idPessoa" [(ngModel)]="dado.idPessoa"
                    [useGrouping]="false"></p-inputNumber></td>
        </tr>
        <tr>
            <td><label htmlFor="codigo">Código da etiqueta: </label></td>
            <td><input pInputText class="p-inputtext-sm" id="codigo" [(ngModel)]="dado.codigoEtiqueta"></td>
        </tr>
        <tr>
            <td><label htmlFor="validade">Validade da etiqueta: </label></td>
            <td><p-calendar id="validade" [(ngModel)]="dado.validadeEtiqueta" [showIcon]="true" [showTime]="true" [showSeconds]="true"
                    dateFormat="yy-mm-dd"></p-calendar></td>
        </tr>
        <tr>
        <td><label htmlFor="cnh">CNH é válida?</label></td>
        <td><p-checkbox [(ngModel)]="dado.CNHvalida" [binary]="true" inputId="cnh"></p-checkbox></td>
        </tr>
        <br>
        <tr>
            <td>
                <p-button styleClass="p-button-text" (click)="addDados()" label="Enviar" icon="pi pi-arrow-right"></p-button>
            </td>
            <td><p-button label="Escanear QRcode" (click)="escanear()" icon="pi pi-camera"></p-button></td>
        </tr>
    </table>
</div>